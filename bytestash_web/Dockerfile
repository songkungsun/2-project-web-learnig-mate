# ë² ì´ìŠ¤ ì´ë¯¸ì§€
FROM python:3.11-slim

# í™˜ê²½ ì„¤ì •
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# ì‘ì—… ë””ë ‰í† ë¦¬
WORKDIR /app

# requirements ë³µì‚¬ ë° ì„¤ì¹˜
COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

# í”„ë¡œì íŠ¸ ì „ì²´ ë³µì‚¬
COPY . .

# ğŸ”» ì•„ë˜ ì¤„ ì‚­ì œ (ë³µì‚¬ ìŠ¤í¬ë¦½íŠ¸ ê´€ë ¨)
# COPY scripts/copy_sqlite_readonly.sh /app/scripts/copy_sqlite_readonly.sh
# RUN chmod +x /app/scripts/copy_sqlite_readonly.sh

# ğŸ”» ENTRYPOINT ì œê±°
# ENTRYPOINT ["/app/scripts/copy_sqlite_readonly.sh"]

# gunicornìœ¼ë¡œ Django ì•± ì‹¤í–‰
CMD ["gunicorn", "bytestash_web.wsgi:application", "--bind", "0.0.0.0:8000"]
